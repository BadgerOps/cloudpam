apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "cloudpam-agent.fullname" . }}
  labels:
    {{- include "cloudpam-agent.labels" . | nindent 4 }}
data:
  agent.yaml: |
    server_url: {{ .Values.config.serverUrl | quote }}
    account_id: {{ .Values.config.accountId }}
    {{- if .Values.config.agentName }}
    agent_name: {{ .Values.config.agentName | quote }}
    {{- end }}
    sync_interval: {{ .Values.config.syncInterval | quote }}
    heartbeat_interval: {{ .Values.config.heartbeatInterval | quote }}
    {{- if .Values.config.awsRegions }}
    aws_regions:
      {{- range .Values.config.awsRegions }}
      - {{ . | quote }}
      {{- end }}
    {{- end }}
    max_retries: {{ .Values.config.maxRetries }}
    retry_backoff: {{ .Values.config.retryBackoff | quote }}
    request_timeout: {{ .Values.config.requestTimeout | quote }}
